(function(){const P=document.createElement("link").relList;if(P&&P.supports&&P.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))L(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&L(c)}).observe(document,{childList:!0,subtree:!0});function f(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function L(i){if(i.ep)return;i.ep=!0;const u=f(i);fetch(i.href,u)}})();function vt(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}var fe={exports:{}},yt=fe.exports,Be;function mt(){return Be||(Be=1,function(S,P){(function(L,i){S.exports=i()})(yt,function(){return function(f){var L={};function i(u){if(L[u])return L[u].exports;var c=L[u]={i:u,l:!1,exports:{}};return f[u].call(c.exports,c,c.exports,i),c.l=!0,c.exports}return i.m=f,i.c=L,i.d=function(u,c,y){i.o(u,c)||Object.defineProperty(u,c,{enumerable:!0,get:y})},i.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},i.t=function(u,c){if(c&1&&(u=i(u)),c&8||c&4&&typeof u=="object"&&u&&u.__esModule)return u;var y=Object.create(null);if(i.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:u}),c&2&&typeof u!="string")for(var h in u)i.d(y,h,(function(p){return u[p]}).bind(null,h));return y},i.n=function(u){var c=u&&u.__esModule?function(){return u.default}:function(){return u};return i.d(c,"a",c),c},i.o=function(u,c){return Object.prototype.hasOwnProperty.call(u,c)},i.p="",i(i.s=9)}([function(f,L,i){f.exports=i(13)},function(f,L){f.exports=!1},function(f,L){function i(c,y,h,p,g,B,E){try{var I=c[B](E),O=I.value}catch(W){h(W);return}I.done?y(O):Promise.resolve(O).then(p,g)}function u(c){return function(){var y=this,h=arguments;return new Promise(function(p,g){var B=c.apply(y,h);function E(O){i(B,p,g,E,I,"next",O)}function I(O){i(B,p,g,E,I,"throw",O)}E(void 0)})}}f.exports=u},function(f,L){function i(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}f.exports=i},function(f,L){function i(c,y){for(var h=0;h<y.length;h++){var p=y[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}function u(c,y,h){return y&&i(c.prototype,y),h&&i(c,h),c}f.exports=u},function(f,L){function i(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?i=function(h){return typeof h}:i=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},i(c)}function u(c){return typeof Symbol=="function"&&i(Symbol.iterator)==="symbol"?f.exports=u=function(h){return i(h)}:f.exports=u=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":i(h)},u(c)}f.exports=u},function(f,L,i){var u=i(10),c=i(11),y=i(12);function h(p,g){return u(p)||c(p,g)||y()}f.exports=h},function(f,L,i){f.exports=function(){return new Worker(i.p+"79c9fe43cdb1b0489ce4.worker.js")}},function(f,L,i){var u=i(15),c=i(16);function y(h,p,g){var B=p&&g||0;typeof h=="string"&&(p=h==="binary"?new Array(16):null,h=null),h=h||{};var E=h.random||(h.rng||u)();if(E[6]=E[6]&15|64,E[8]=E[8]&63|128,p)for(var I=0;I<16;++I)p[B+I]=E[I];return p||c(E)}f.exports=y},function(f,L,i){f.exports=i(17)},function(f,L){function i(u){if(Array.isArray(u))return u}f.exports=i},function(f,L){function i(u,c){var y=[],h=!0,p=!1,g=void 0;try{for(var B=u[Symbol.iterator](),E;!(h=(E=B.next()).done)&&(y.push(E.value),!(c&&y.length===c));h=!0);}catch(I){p=!0,g=I}finally{try{!h&&B.return!=null&&B.return()}finally{if(p)throw g}}return y}f.exports=i},function(f,L){function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}f.exports=i},function(f,L,i){var u=function(c){var y=Object.prototype,h=y.hasOwnProperty,p,g=typeof Symbol=="function"?Symbol:{},B=g.iterator||"@@iterator",E=g.asyncIterator||"@@asyncIterator",I=g.toStringTag||"@@toStringTag";function O(s,o,d,k){var v=o&&o.prototype instanceof ee?o:ee,C=Object.create(v.prototype),x=new re(k||[]);return C._invoke=ve(s,d,x),C}c.wrap=O;function W(s,o,d){try{return{type:"normal",arg:s.call(o,d)}}catch(k){return{type:"throw",arg:k}}}var H="suspendedStart",pe="suspendedYield",se="executing",X="completed",N={};function ee(){}function j(){}function z(){}var J={};J[B]=function(){return this};var $=Object.getPrototypeOf,Q=$&&$($(ne([])));Q&&Q!==y&&h.call(Q,B)&&(J=Q);var G=z.prototype=ee.prototype=Object.create(J);j.prototype=G.constructor=z,z.constructor=j,z[I]=j.displayName="GeneratorFunction";function ue(s){["next","throw","return"].forEach(function(o){s[o]=function(d){return this._invoke(o,d)}})}c.isGeneratorFunction=function(s){var o=typeof s=="function"&&s.constructor;return o?o===j||(o.displayName||o.name)==="GeneratorFunction":!1},c.mark=function(s){return Object.setPrototypeOf?Object.setPrototypeOf(s,z):(s.__proto__=z,I in s||(s[I]="GeneratorFunction")),s.prototype=Object.create(G),s},c.awrap=function(s){return{__await:s}};function Z(s){function o(v,C,x,_){var D=W(s[v],s,C);if(D.type==="throw")_(D.arg);else{var F=D.arg,K=F.value;return K&&typeof K=="object"&&h.call(K,"__await")?Promise.resolve(K.__await).then(function(V){o("next",V,x,_)},function(V){o("throw",V,x,_)}):Promise.resolve(K).then(function(V){F.value=V,x(F)},function(V){return o("throw",V,x,_)})}}var d;function k(v,C){function x(){return new Promise(function(_,D){o(v,C,_,D)})}return d=d?d.then(x,x):x()}this._invoke=k}ue(Z.prototype),Z.prototype[E]=function(){return this},c.AsyncIterator=Z,c.async=function(s,o,d,k){var v=new Z(O(s,o,d,k));return c.isGeneratorFunction(o)?v:v.next().then(function(C){return C.done?C.value:v.next()})};function ve(s,o,d){var k=H;return function(C,x){if(k===se)throw new Error("Generator is already running");if(k===X){if(C==="throw")throw x;return ce()}for(d.method=C,d.arg=x;;){var _=d.delegate;if(_){var D=le(_,d);if(D){if(D===N)continue;return D}}if(d.method==="next")d.sent=d._sent=d.arg;else if(d.method==="throw"){if(k===H)throw k=X,d.arg;d.dispatchException(d.arg)}else d.method==="return"&&d.abrupt("return",d.arg);k=se;var F=W(s,o,d);if(F.type==="normal"){if(k=d.done?X:pe,F.arg===N)continue;return{value:F.arg,done:d.done}}else F.type==="throw"&&(k=X,d.method="throw",d.arg=F.arg)}}}function le(s,o){var d=s.iterator[o.method];if(d===p){if(o.delegate=null,o.method==="throw"){if(s.iterator.return&&(o.method="return",o.arg=p,le(s,o),o.method==="throw"))return N;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return N}var k=W(d,s.iterator,o.arg);if(k.type==="throw")return o.method="throw",o.arg=k.arg,o.delegate=null,N;var v=k.arg;if(!v)return o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,N;if(v.done)o[s.resultName]=v.value,o.next=s.nextLoc,o.method!=="return"&&(o.method="next",o.arg=p);else return v;return o.delegate=null,N}ue(G),G[I]="Generator",G[B]=function(){return this},G.toString=function(){return"[object Generator]"};function ye(s){var o={tryLoc:s[0]};1 in s&&(o.catchLoc=s[1]),2 in s&&(o.finallyLoc=s[2],o.afterLoc=s[3]),this.tryEntries.push(o)}function te(s){var o=s.completion||{};o.type="normal",delete o.arg,s.completion=o}function re(s){this.tryEntries=[{tryLoc:"root"}],s.forEach(ye,this),this.reset(!0)}c.keys=function(s){var o=[];for(var d in s)o.push(d);return o.reverse(),function k(){for(;o.length;){var v=o.pop();if(v in s)return k.value=v,k.done=!1,k}return k.done=!0,k}};function ne(s){if(s){var o=s[B];if(o)return o.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length)){var d=-1,k=function v(){for(;++d<s.length;)if(h.call(s,d))return v.value=s[d],v.done=!1,v;return v.value=p,v.done=!0,v};return k.next=k}}return{next:ce}}c.values=ne;function ce(){return{value:p,done:!0}}return re.prototype={constructor:re,reset:function(s){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(te),!s)for(var o in this)o.charAt(0)==="t"&&h.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=p)},stop:function(){this.done=!0;var s=this.tryEntries[0],o=s.completion;if(o.type==="throw")throw o.arg;return this.rval},dispatchException:function(s){if(this.done)throw s;var o=this;function d(D,F){return C.type="throw",C.arg=s,o.next=D,F&&(o.method="next",o.arg=p),!!F}for(var k=this.tryEntries.length-1;k>=0;--k){var v=this.tryEntries[k],C=v.completion;if(v.tryLoc==="root")return d("end");if(v.tryLoc<=this.prev){var x=h.call(v,"catchLoc"),_=h.call(v,"finallyLoc");if(x&&_){if(this.prev<v.catchLoc)return d(v.catchLoc,!0);if(this.prev<v.finallyLoc)return d(v.finallyLoc)}else if(x){if(this.prev<v.catchLoc)return d(v.catchLoc,!0)}else if(_){if(this.prev<v.finallyLoc)return d(v.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(s,o){for(var d=this.tryEntries.length-1;d>=0;--d){var k=this.tryEntries[d];if(k.tryLoc<=this.prev&&h.call(k,"finallyLoc")&&this.prev<k.finallyLoc){var v=k;break}}v&&(s==="break"||s==="continue")&&v.tryLoc<=o&&o<=v.finallyLoc&&(v=null);var C=v?v.completion:{};return C.type=s,C.arg=o,v?(this.method="next",this.next=v.finallyLoc,N):this.complete(C)},complete:function(s,o){if(s.type==="throw")throw s.arg;return s.type==="break"||s.type==="continue"?this.next=s.arg:s.type==="return"?(this.rval=this.arg=s.arg,this.method="return",this.next="end"):s.type==="normal"&&o&&(this.next=o),N},finish:function(s){for(var o=this.tryEntries.length-1;o>=0;--o){var d=this.tryEntries[o];if(d.finallyLoc===s)return this.complete(d.completion,d.afterLoc),te(d),N}},catch:function(s){for(var o=this.tryEntries.length-1;o>=0;--o){var d=this.tryEntries[o];if(d.tryLoc===s){var k=d.completion;if(k.type==="throw"){var v=k.arg;te(d)}return v}}throw new Error("illegal catch attempt")},delegateYield:function(s,o,d){return this.delegate={iterator:ne(s),resultName:o,nextLoc:d},this.method==="next"&&(this.arg=p),N}},c}(f.exports);try{regeneratorRuntime=u}catch{Function("r","regeneratorRuntime = r")(u)}},function(f,L){},function(f,L){var i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(i){var u=new Uint8Array(16);f.exports=function(){return i(u),u}}else{var c=new Array(16);f.exports=function(){for(var h=0,p;h<16;h++)h&3||(p=Math.random()*4294967296),c[h]=p>>>((h&3)<<3)&255;return c}}},function(f,L){for(var i=[],u=0;u<256;++u)i[u]=(u+256).toString(16).substr(1);function c(y,h){var p=h||0,g=i;return[g[y[p++]],g[y[p++]],g[y[p++]],g[y[p++]],"-",g[y[p++]],g[y[p++]],"-",g[y[p++]],g[y[p++]],"-",g[y[p++]],g[y[p++]],"-",g[y[p++]],g[y[p++]],g[y[p++]],g[y[p++]],g[y[p++]],g[y[p++]]].join("")}f.exports=c},function(f,L,i){i.r(L);var u=i(5),c=i.n(u),y=i(6),h=i.n(y),p=i(0),g=i.n(p),B=i(2),E=i.n(B),I=i(3),O=i.n(I),W=i(4),H=i.n(W),pe=i(7),se=i.n(pe);function X(e){return!!(e&&typeof e.then=="function")}function N(e){return e||(e=0),new Promise(function(r){return setTimeout(r,e)})}function ee(e,r){return Math.floor(Math.random()*(r-e+1)+e)}function j(e){for(var r="",t="abcdefghijklmnopqrstuvwxzy0123456789",n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}var z=0,J=0;function $(){var e=new Date().getTime();return e===z?(J++,e*1e3+J):(z=e,J=0,e*1e3)}var Q=i(1),G=i.n(Q),ue=$,Z="native";function ve(e){var r={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return r.bc.onmessage=function(t){r.messagesCallback&&r.messagesCallback(t.data)},r}function le(e){e.bc.close(),e.subFns=[]}function ye(e,r){e.bc.postMessage(r,!1)}function te(e,r,t){e.messagesCallbackTime=t,e.messagesCallback=r}function re(){if(G.a&&typeof window>"u")return!1;if(typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function ne(){return 100}var ce={create:ve,close:le,onMessage:te,postMessage:ye,canBeUsed:re,type:Z,averageResponseTime:ne,microSeconds:ue},s=function(r){this.ttl=r,this.set=new Set,this.timeMap=new Map,this.has=this.set.has.bind(this.set)};s.prototype={add:function(r){this.timeMap.set(r,d()),this.set.add(r),o(this)},clear:function(){this.set.clear(),this.timeMap.clear()}};function o(e){for(var r=d()-e.ttl,t=e.set[Symbol.iterator]();;){var n=t.next().value;if(!n)return;var a=e.timeMap.get(n);if(a<r)e.timeMap.delete(n),e.set.delete(n);else return}}function d(){return new Date().getTime()}var k=s;function v(e){return e||(e={}),e=JSON.parse(JSON.stringify(e)),typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=1e3*45),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=1e3*60),e.node||(e.node={}),e.node.ttl||(e.node.ttl=1e3*60*2),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var C=$,x="pubkey.broadcast-channel-0-",_="messages",D="idb";function F(){return typeof indexedDB<"u"?indexedDB:typeof window.mozIndexedDB<"u"?window.mozIndexedDB:typeof window.webkitIndexedDB<"u"?window.webkitIndexedDB:typeof window.msIndexedDB<"u"?window.msIndexedDB:!1}function K(e){var r=F(),t=x+e,n=r.open(t,1);n.onupgradeneeded=function(l){var b=l.target.result;b.createObjectStore(_,{keyPath:"id",autoIncrement:!0})};var a=new Promise(function(l,b){n.onerror=function(m){return b(m)},n.onsuccess=function(){l(n.result)}});return a}function V(e,r,t){var n=new Date().getTime(),a={uuid:r,time:n,data:t},l=e.transaction([_],"readwrite");return new Promise(function(b,m){l.oncomplete=function(){return b()},l.onerror=function(R){return m(R)};var w=l.objectStore(_);w.add(a)})}function Ae(e,r){var t=e.transaction(_).objectStore(_),n=[],a=IDBKeyRange.bound(r+1,1/0);return new Promise(function(l){t.openCursor(a).onsuccess=function(b){var m=b.target.result;m?(n.push(m.value),m.continue()):l(n)}})}function Fe(e,r){var t=e.transaction([_],"readwrite").objectStore(_).delete(r);return new Promise(function(n){t.onsuccess=function(){return n()}})}function Re(e,r){var t=new Date().getTime()-r,n=e.transaction(_).objectStore(_),a=[];return new Promise(function(l){n.openCursor().onsuccess=function(b){var m=b.target.result;if(m){var w=m.value;if(w.time<t)a.push(w),m.continue();else{l(a);return}}else l(a)}})}function Oe(e,r){return Re(e,r).then(function(t){return Promise.all(t.map(function(n){return Fe(e,n.id)}))})}function Ne(e,r){return r=v(r),K(e).then(function(t){var n={closed:!1,lastCursorId:0,channelName:e,options:r,uuid:j(10),eMIs:new k(r.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:t};return be(n),n})}function be(e){if(!e.closed)return ke(e).then(function(){return N(e.options.idb.fallbackInterval)}).then(function(){return be(e)})}function De(e,r){return!(e.uuid===r.uuid||r.eMIs.has(e.id)||e.data.time<r.messagesCallbackTime)}function ke(e){return e.closed||!e.messagesCallback?Promise.resolve():Ae(e.db,e.lastCursorId).then(function(r){var t=r.map(function(n){return n.id>e.lastCursorId&&(e.lastCursorId=n.id),n}).filter(function(n){return De(n,e)}).sort(function(n,a){return n.time-a.time});return t.forEach(function(n){e.messagesCallback&&(e.eMIs.add(n.id),e.messagesCallback(n.data))}),Promise.resolve()})}function Ge(e){e.closed=!0,e.db.close()}function Ue(e,r){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return V(e.db,e.uuid,r)}).then(function(){ee(0,10)===0&&Oe(e.db,e.options.idb.ttl)}),e.writeBlockPromise}function ze(e,r,t){e.messagesCallbackTime=t,e.messagesCallback=r,ke(e)}function Ve(){if(G.a)return!1;var e=F();return!!e}function je(e){return e.idb.fallbackInterval*2}var We={create:Ne,close:Ge,onMessage:ze,postMessage:Ue,canBeUsed:Ve,type:D,averageResponseTime:je,microSeconds:C},He=$,Je="pubkey.broadcastChannel-",$e="localstorage";function Ke(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function Se(e){return Je+e}function Ye(e,r){return new Promise(function(t){N().then(function(){var n=Se(e.channelName),a={token:j(10),time:new Date().getTime(),data:r,uuid:e.uuid},l=JSON.stringify(a);localStorage.setItem(n,l);var b=document.createEvent("Event");b.initEvent("storage",!0,!0),b.key=n,b.newValue=l,window.dispatchEvent(b),t()})})}function Xe(e,r){var t=Se(e),n=function(l){l.key===t&&r(JSON.parse(l.newValue))};return window.addEventListener("storage",n),n}function Qe(e){window.removeEventListener("storage",e)}function Ze(e,r){if(r=v(r),!Le())throw new Error("BroadcastChannel: localstorage cannot be used");var t=j(10),n=new k(r.localstorage.removeTimeout),a={channelName:e,uuid:t,eMIs:n};return a.listener=Xe(e,function(l){a.messagesCallback&&l.uuid!==t&&(!l.token||n.has(l.token)||l.data.time&&l.data.time<a.messagesCallbackTime||(n.add(l.token),a.messagesCallback(l.data)))}),a}function qe(e){Qe(e.listener)}function et(e,r,t){e.messagesCallbackTime=t,e.messagesCallback=r}function Le(){if(G.a)return!1;var e=Ke();return!!e}function tt(){return 120}var rt={create:Ze,close:qe,onMessage:et,postMessage:Ye,canBeUsed:Le,type:$e,averageResponseTime:tt,microSeconds:He},ie=[ce,We,rt];if(G.a){var Pe=i(14);typeof Pe.canBeUsed=="function"&&ie.push(Pe)}function Ee(e){if(e.type){var r=ie.find(function(a){return a.type===e.type});if(r)return r;throw new Error("method-type "+e.type+" not found")}var t=ie;!e.webWorkerSupport&&!G.a&&(t=ie.filter(function(a){return a.type!=="idb"}));var n=t.find(function(a){return a.canBeUsed()});if(n)return n;throw new Error("No useable methode found:"+JSON.stringify(ie.map(function(a){return a.type})))}var de=function(r,t){this.name=r,this.options=v(t),this.method=Ee(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._befC=[],this._prepP=null,nt(this)};de._pubkey=!0,de.clearNodeFolder=function(e){e=v(e);var r=Ee(e);return r.type==="node"?r.clearNodeFolder().then(function(){return!0}):Promise.resolve(!1)},de.prototype={postMessage:function(r){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return Me(this,"message",r)},postInternal:function(r){return Me(this,"internal",r)},set onmessage(e){var r=this.method.microSeconds(),t={time:r,fn:e};Ce(this,"message",this._onML),e&&typeof e=="function"?(this._onML=t,Te(this,"message",t)):this._onML=null},addEventListener:function(r,t){var n=this.method.microSeconds(),a={time:n,fn:t};Te(this,r,a)},removeEventListener:function(r,t){var n=this._addEL[r].find(function(a){return a.fn===t});Ce(this,r,n)},close:function(){var r=this;if(!this.closed){this.closed=!0;var t=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],t.then(function(){return Promise.all(r._befC.map(function(n){return n()}))}).then(function(){return r.method.close(r._state)})}},get type(){return this.method.type}};function Me(e,r,t){var n=e.method.microSeconds(),a={time:n,type:r,data:t},l=e._prepP?e._prepP:Promise.resolve();return l.then(function(){return e.method.postMessage(e._state,a)})}function nt(e){var r=e.method.create(e.name,e.options);X(r)?(e._prepP=r,r.then(function(t){e._state=t})):e._state=r}function _e(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function Te(e,r,t){e._addEL[r].push(t),it(e)}function Ce(e,r,t){e._addEL[r]=e._addEL[r].filter(function(n){return n!==t}),at(e)}function it(e){if(!e._iL&&_e(e)){var r=function(a){e._addEL[a.type].forEach(function(l){a.time>=l.time&&l.fn(a.data)})},t=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,r,t)}):(e._iL=!0,e.method.onMessage(e._state,r,t))}}function at(e){if(e._iL&&!_e(e)){e._iL=!1;var r=e.method.microSeconds();e.method.onMessage(e._state,null,r)}}var ot=de,st=i(8),ut=i.n(st),lt=function(){function e(){O()(this,e),this.setVerbosity("WARNING")}return H()(e,[{key:"debug",value:function(){if(this.checkVerbosity(4)){var t;(t=console).log.apply(t,arguments)}}},{key:"log",value:function(){if(this.checkVerbosity(4)){var t;(t=console).log.apply(t,arguments)}}},{key:"info",value:function(){if(this.checkVerbosity(3)){var t;(t=console).info.apply(t,arguments)}}},{key:"warn",value:function(){if(this.checkVerbosity(2)){var t;(t=console).warn.apply(t,arguments)}}},{key:"error",value:function(){if(this.checkVerbosity(1)){var t;(t=console).error.apply(t,arguments)}}},{key:"setVerbosity",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"info";t===void 0&&(t=n),typeof t=="string"&&(t={ERROR:1,WARNING:2,INFO:3,LOG:4,DEBUG:4}[t.toUpperCase()]||2),this.level=t}},{key:"checkVerbosity",value:function(t){return this.level>=t}}]),e}(),ct=new lt,T=ct,dt=function(r){return new Promise(function(t){return setTimeout(t,r)})},ft=function(){function e(r){var t=this;O()(this,e),T.setVerbosity(r.jsLogVerbosityLevel),this.worker=new se.a,this.worker.onmessage=function(n){t.onResponse(n.data)},this.query_id=0,this.query_callbacks=new Map,"onUpdate"in r&&(this.onUpdate=r.onUpdate,delete r.onUpdate),r.instanceName=r.instanceName||"tdlib",this.fileManager=new ht(r.instanceName,this),this.worker.postMessage({"@type":"init",options:r}),this.closeOtherClients(r)}return H()(e,[{key:"send",value:function(t){return this.doSend(t,!0)}},{key:"sendInternal",value:function(t){return this.doSend(t,!1)}},{key:"doSend",value:function(t,n){var a=this;this.query_id++,t["@extra"]?t["@extra"]={"@old_extra":JSON.parse(JSON.stringify(t["@extra"])),query_id:this.query_id}:t["@extra"]={query_id:this.query_id},t["@type"]==="setJsLogVerbosityLevel"&&T.setVerbosity(t.new_verbosity_level),T.debug("send to worker: ",t);var l=new Promise(function(b,m){a.query_callbacks.set(a.query_id,[b,m])});return n?this.externalPostMessage(t):this.worker.postMessage(t),l}},{key:"externalPostMessage",value:function(t){var n=["getStorageStatistics","getStorageStatisticsFast","optimizeStorage","addProxy","init","start"];if(n.includes(t["@type"])){this.onResponse({"@type":"error","@extra":t["@extra"],code:400,message:"Method '"+t["@type"]+"' is not supported"});return}if(t["@type"]==="readFile"||t["@type"]==="readFilePart"){this.readFile(t);return}if(t["@type"]==="deleteFile"){this.deleteFile(t);return}this.worker.postMessage(t)}},{key:"readFile",value:function(){var r=E()(g.a.mark(function n(a){var l;return g.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.fileManager.readFile(a);case 2:l=m.sent,this.onResponse(l);case 4:case"end":return m.stop()}},n,this)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"deleteFile",value:function(){var r=E()(g.a.mark(function n(a){var l;return g.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(l=this.fileManager.deleteFile(a),m.prev=1,!l.idb_key){m.next=6;break}return m.next=5,this.sendInternal({"@type":"deleteIdbKey",idb_key:l.idb_key});case 5:delete l.idb_key;case 6:return m.next=8,this.sendInternal({"@type":"deleteFile",file_id:a.file_id});case 8:m.next=12;break;case 10:m.prev=10,m.t0=m.catch(1);case 12:this.onResponse(l);case 13:case"end":return m.stop()}},n,this,[[1,10]])}));function t(n){return r.apply(this,arguments)}return t}()},{key:"onResponse",value:function(t){if(T.debug("receive from worker: ",JSON.parse(JSON.stringify(t,function(w,R){if(!(w==="arr"||w==="data"))return R}))),t=this.prepareResponse(t),"@extra"in t){var n=t["@extra"].query_id,a=this.query_callbacks.get(n),l=h()(a,2),b=l[0],m=l[1];this.query_callbacks.delete(n),"@old_extra"in t["@extra"]&&(t["@extra"]=t["@extra"]["@old_extra"]),b&&(t["@type"]==="error"?m(t):b(t))}else{if(t["@type"]==="inited"){this.onInited();return}if(t["@type"]==="fsInited"){this.onFsInited();return}t["@type"]==="updateAuthorizationState"&&t.authorization_state["@type"]==="authorizationStateClosed"&&this.onClosed(),this.onUpdate(t)}}},{key:"prepareFile",value:function(t){return this.fileManager.registerFile(t)}},{key:"prepareResponse",value:function(t){if(t["@type"]==="file")return this.prepareFile(t);for(var n in t){var a=t[n];a&&c()(a)==="object"&&n!=="data"&&n!=="arr"&&(t[n]=this.prepareResponse(a))}return t}},{key:"onBroadcastMessage",value:function(t){var n=t;if(n.uid===this.uid){T.info("ignore self broadcast message: ",n);return}if(T.info("receive broadcast message: ",n),!(n.isBackground&&!this.isBackground)){if(!n.isBackground&&this.isBackground||n.timestamp>this.timestamp){this.close();return}}n.state==="closed"?(this.waitSet.delete(n.uid),this.waitSet.size===0&&(T.info("onWaitSetEmpty"),this.onWaitSetEmpty(),this.onWaitSetEmpty=function(){})):(this.waitSet.add(n.uid),n.state!=="closing"&&this.postState())}},{key:"postState",value:function(){var t={uid:this.uid,state:this.state,timestamp:this.timestamp,isBackground:this.isBackground};T.info("Post state: ",t),this.channel.postMessage(t)}},{key:"onWaitSetEmpty",value:function(){}},{key:"onFsInited",value:function(){this.fileManager.init()}},{key:"onInited",value:function(){this.isInited=!0,this.doSendStart()}},{key:"sendStart",value:function(){this.wantSendStart=!0,this.doSendStart()}},{key:"doSendStart",value:function(){if(!(!this.isInited||!this.wantSendStart||this.state!=="start")){this.wantSendStart=!1,this.state="active";var t={"@type":"start"};T.info("send to worker: ",t),this.worker.postMessage(t)}}},{key:"onClosed",value:function(){this.isClosing=!0,this.worker.terminate(),T.info("worker is terminated"),this.state="closed",this.postState()}},{key:"close",value:function(){if(!this.isClosing){if(this.isClosing=!0,T.info("close state: ",this.state),this.state==="start"){this.onClosed(),this.onUpdate({"@type":"updateAuthorizationState",authorization_state:{"@type":"authorizationStateClosed"}});return}var t={"@type":"close"};T.info("send to worker: ",t),this.worker.postMessage(t),this.state="closing",this.postState()}}},{key:"closeOtherClients",value:function(){var r=E()(g.a.mark(function n(a){var l=this;return g.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.uid=ut()(),this.state="start",this.isBackground=!!a.isBackground,this.timestamp=Date.now(),this.waitSet=new Set,T.info("close other clients"),this.channel=new ot(a.instanceName,{webWorkerSupport:!1}),this.postState(),this.channel.onmessage=function(w){l.onBroadcastMessage(w)},m.next=11,dt(300);case 11:if(this.waitSet.size===0){m.next=14;break}return m.next=14,new Promise(function(w){l.onWaitSetEmpty=w});case 14:this.sendStart();case 15:case"end":return m.stop()}},n,this)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"onUpdate",value:function(t){T.info("ignore onUpdate")}}]),e}(),Ie=function(){function e(r){O()(this,e),this.value=r,this.clear()}return H()(e,[{key:"erase",value:function(){this.prev.connect(this.next),this.clear()}},{key:"clear",value:function(){this.prev=this,this.next=this}},{key:"connect",value:function(t){this.next=t,t.prev=this}},{key:"onUsed",value:function(t){t.usedAt=Date.now(),t.erase(),t.connect(this.next),T.debug("LRU: used file_id: ",t.value),this.connect(t)}},{key:"getLru",value:function(){if(this===this.next)throw new Error("popLru from empty list");return this.prev}}]),e}(),ht=function(){function e(r,t){O()(this,e),this.instanceName=r,this.cache=new Map,this.pending=[],this.transaction_id=0,this.totalSize=0,this.lru=new Ie(-1),this.client=t}return H()(e,[{key:"init",value:function(){var t=this;this.idb=new Promise(function(n,a){var l=indexedDB.open(t.instanceName);l.onsuccess=function(){return n(l.result)},l.onerror=function(){return a(l.error)}}),this.isInited=!0}},{key:"unload",value:function(t){t.arr&&(T.debug("LRU: delete file_id: ",t.node.value," with arr.length: ",t.arr.length),this.totalSize-=t.arr.length,delete t.arr),t.node&&(t.node.erase(),delete t.node)}},{key:"registerFile",value:function(t){t.idb_key||t.arr?t.local.is_downloading_completed=!0:t.local.is_downloading_completed=!1;var n={},a=this.cache.get(t.id);if(a?n=a:this.cache.set(t.id,n),t.idb_key?(n.idb_key=t.idb_key,delete t.idb_key):delete n.idb_key,t.arr){for(var l=Date.now();this.totalSize>1e8;){var b=this.lru.getLru();if(b.usedAt+60*1e3>l)break;var m=this.cache.get(b.value);this.unload(m)}n.arr&&(T.warn("Receive file.arr at least twice for the same file"),this.totalSize-=n.arr.length),n.arr=t.arr,delete t.arr,this.totalSize+=n.arr.length,n.node||(T.debug("LRU: create file_id: ",t.id," with arr.length: ",n.arr.length),n.node=new Ie(t.id)),this.lru.onUsed(n.node),T.info("Total file.arr size: ",this.totalSize)}return n.file=t,t}},{key:"flushLoad",value:function(){var r=E()(g.a.mark(function n(){var a,l,b,m,w,R,U,me,M,xe;return g.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return a=this.pending,this.pending=[],A.next=4,this.idb;case 4:for(l=A.sent,b=this.transaction_id++,m=l.transaction(["keyvaluepairs"],"readonly").objectStore("keyvaluepairs"),T.debug("Load group of files from idb",a.length),w=!0,R=!1,U=void 0,A.prev=11,me=function(){var ae=xe.value,ge=m.get(ae.key);ge.onsuccess=function(pt){var we=pt.target.result;we?(we.size===0&&T.error("Receive empty blob from db ",ae.key),ae.resolve({data:we,transaction_id:b})):ae.reject()},ge.onerror=function(){return ae.reject(ge.error)}},M=a[Symbol.iterator]();!(w=(xe=M.next()).done);w=!0)me();A.next=20;break;case 16:A.prev=16,A.t0=A.catch(11),R=!0,U=A.t0;case 20:A.prev=20,A.prev=21,!w&&M.return!=null&&M.return();case 23:if(A.prev=23,!R){A.next=26;break}throw U;case 26:return A.finish(23);case 27:return A.finish(20);case 28:case"end":return A.stop()}},n,this,[[11,16,20,28],[21,,23,27]])}));function t(){return r.apply(this,arguments)}return t}()},{key:"load",value:function(t,n,a){var l=this;this.pending.length===0&&setTimeout(function(){l.flushLoad()},1),this.pending.push({key:t,resolve:n,reject:a})}},{key:"doLoadFull",value:function(){var r=E()(g.a.mark(function n(a){var l=this,b;return g.a.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!a.arr){w.next=2;break}return w.abrupt("return",{data:new Blob([a.arr]),transaction_id:-1});case 2:if(!a.idb_key){w.next=7;break}return b=a.idb_key,w.next=6,new Promise(function(R,U){l.load(b,R,U)});case 6:return w.abrupt("return",w.sent);case 7:throw new Error("File is not loaded");case 8:case"end":return w.stop()}},n)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"doLoad",value:function(){var r=E()(g.a.mark(function n(a,l,b){var m,w,R,U;return g.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!(!a.arr&&!a.idb_key&&a.file.local.path)){M.next=22;break}return M.prev=1,M.next=4,this.client.sendInternal({"@type":"getFileDownloadedPrefixSize",file_id:a.file.id,offset:l});case 4:if(m=M.sent,b){M.next=9;break}b=m.count,M.next=11;break;case 9:if(!(b>m.count)){M.next=11;break}throw new Error("File not loaded yet");case 11:return M.next=13,this.client.sendInternal({"@type":"readFilePart",path:a.file.local.path,offset:l,count:b});case 13:return w=M.sent,w.data=new Blob([w.data]),w.transaction_id=-2,M.abrupt("return",w);case 19:M.prev=19,M.t0=M.catch(1),T.info("readFilePart failed",a,l,b,M.t0);case 22:return M.next=24,this.doLoadFull(a);case 24:return R=M.sent,U=R.data.size,b||(b=U),l>U&&(l=U),R.data=R.data.slice(l,l+b),M.abrupt("return",R);case 30:case"end":return M.stop()}},n,this,[[1,19]])}));function t(n,a,l){return r.apply(this,arguments)}return t}()},{key:"doDelete",value:function(t){return this.unload(t),t.idb_key}},{key:"readFile",value:function(){var r=E()(g.a.mark(function n(a){var l,b;return g.a.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(w.prev=0,this.isInited){w.next=3;break}throw new Error("FileManager is not inited");case 3:if(l=this.cache.get(a.file_id),l){w.next=6;break}throw new Error("File is not loaded");case 6:return l.node&&this.lru.onUsed(l.node),a.offset=a.offset||0,a.size=a.count||a.size||0,w.next=11,this.doLoad(l,a.offset,a.size);case 11:return b=w.sent,w.abrupt("return",{"@type":"filePart","@extra":a["@extra"],data:b.data,transaction_id:b.transaction_id});case 15:return w.prev=15,w.t0=w.catch(0),w.abrupt("return",{"@type":"error","@extra":a["@extra"],code:400,message:w.t0});case 18:case"end":return w.stop()}},n,this,[[0,15]])}));function t(n){return r.apply(this,arguments)}return t}()},{key:"deleteFile",value:function(t){var n={"@type":"ok","@extra":t["@extra"]};try{if(!this.isInited)throw new Error("FileManager is not inited");var a=this.cache.get(t.file_id);if(!a)throw new Error("File is not loaded");var l=this.doDelete(a);l&&(n.idb_key=l)}catch{}return n}}]),e}();L.default=ft}])})}(fe)),fe.exports}var gt=mt();const wt=vt(gt),he={REACT_APP_TELEGRAM_API_ID:357040,REACT_APP_TELEGRAM_API_HASH:"4e9dbeb7ef84838f40eb1ac872688911"},bt=93372553;let q=new wt({readOnly:!1,logVerbosityLevel:0,fastUpdating:!0,jsLogVerbosityLevel:0,useDatabase:!1,mode:"wasm",isBackground:!1});async function Y(S){try{console.log("send request: ",S);const P=await q.send(S);console.log("res: ",P)}catch(P){console.error("Error sending request: ",P)}}function oe(S){document.querySelector("#error").textContent=S}async function kt(S,P){try{if(S)return await(await fetch("https://k.lillo.ai/api/telegram/newagent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({botName:P,botUsername:P+"_bot",token:S})})).json()}catch(f){return console.error(f),null}}function St(S){const P="Use this token to access the HTTP API:",f="Keep your token secure and store it safely",L=S.indexOf(P),i=S.indexOf(f);if(L<0)return-1;if(i<0)return-1;{const u=L+P.length+1,c=i-1;return S.substring(u,c)}}console.log(he.REACT_APP_TELEGRAM_API_ID);console.log(he.REACT_APP_TELEGRAM_API_HASH);q.onUpdate=async S=>{if(S["@type"]==="updateAuthorizationState"){const P=S.authorization_state["@type"];if(console.log("Authorization State Change:",P,S),P==="authorizationStateWaitTdlibParameters")try{await Y({"@type":"setTdlibParameters",use_test_dc:!1,api_id:he.REACT_APP_TELEGRAM_API_ID,api_hash:he.REACT_APP_TELEGRAM_API_HASH,system_language_code:"en",device_model:"desktop",application_version:"1"})}catch(f){console.error("Error setting TDLib parameters:",f)}P==="authorizationStateReady"&&(console.log("Authorization state ready"),document.querySelector("#submitButton").disabled=!1,document.querySelector("#botname").disabled=!1),P==="authorizationStateWaitPhoneNumber"&&(document.querySelector("#phoneInput").disabled=!1,document.querySelector("#sendNumberButton").disabled=!1),P==="authorizationStateWaitCode"&&(document.querySelector("#codeInput").disabled=!1,document.querySelector("#sendCodeButton").disabled=!1),P==="authorizationStateLoggingOut"&&console.log("Logging out - Check if this was intended"),P==="authorizationStateWaitPassword"&&(document.querySelector("#password").disabled=!1,document.querySelector("#submitPasswordButton").disabled=!1)}if(S["@type"]==="updateNewMessage"){const P=S.message;if(P.content["@type"]==="messageText"){const f=P.content.text.text;if(console.log("message: ",P),console.log("text: ",f),P.sender_id.user_id===bt)if(f.includes("Alright, a new bot. How are we")){const i=document.querySelector("#botname").value;i&&Y({"@type":"sendMessage",chat_id:P.chat_id,input_message_content:{"@type":"inputMessageText",text:{"@type":"formattedText",text:i}}})}else if(f.includes("Good. Now")){const i=document.querySelector("#botname").value;i&&Y({"@type":"sendMessage",chat_id:P.chat_id,input_message_content:{"@type":"inputMessageText",text:{"@type":"formattedText",text:i+"_bot"}}})}else if(f.includes("Sorry, this username is already taken"))oe(f);else if(f.includes("Done! Congratulations")){const i=document.querySelector("#botname").value,u=St(f);u!==-1?(await kt(u,i)).status===200?document.querySelector("#link").textContent=`https://t.me/${i}_bot`:oe("Failed to save token"):oe("Failed to parse token")}else f.includes("Sorry, too many attempts")&&oe(f)}}};console.log("client: ",q);async function Lt(){oe("");const S=await q.send({"@type":"searchPublicChat",username:"BotFather"}),P=await q.send({"@type":"createPrivateChat",user_id:S.id||93372553,force:!0});Y({"@type":"sendMessage",chat_id:P.id,input_message_content:{"@type":"inputMessageText",text:{"@type":"formattedText",text:"/newbot"}}})}document.querySelector("#sendNumberButton").addEventListener("click",()=>{const S=document.querySelector("#phoneInput").value;Y({"@type":"setAuthenticationPhoneNumber",phone_number:S})});document.querySelector("#sendCodeButton").addEventListener("click",()=>{const S=document.querySelector("#codeInput").value;console.log("code: ",S),Y({"@type":"checkAuthenticationCode",code:S})});document.querySelector("#submitPasswordButton").addEventListener("click",()=>{const S=document.querySelector("#password").value;Y({"@type":"checkAuthenticationPassword",password:S})});document.querySelector("#submitButton").addEventListener("click",()=>{Lt()});q.onError=S=>{console.error("TDLib Error:",S)};
